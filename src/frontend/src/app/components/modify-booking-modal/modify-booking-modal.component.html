<div class="modal-backdrop" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-button" (click)="closeModal()">√ó</button>
      
      <div class="modal-inner">
        <h2>Modifier votre r√©servation</h2>
        
        <!-- Reservation details -->
        <div class="reservation-info">
          <div class="detail-row">
            <span class="detail-icon">üìÖ</span>
            <span class="detail-label">Date:</span>
            <span class="detail-value">{{ formattedDate }}</span>
          </div>
          
          <div class="detail-row">
            <span class="detail-icon">üïí</span>
            <span class="detail-label">Heure:</span>
            <span class="detail-value">{{ formattedTime }}</span>
          </div>
        </div>
        
        <!-- Info message about date/time changes -->
        <div class="info-message">
          <p>Pour modifier la date ou l'heure de votre r√©servation, veuillez annuler cette r√©servation et en cr√©er une nouvelle.</p>
        </div>
        
        <!-- Error message -->
        <div *ngIf="errorMessage" class="error-message">
          <p>{{ errorMessage }}</p>
        </div>
        
        <!-- Success message -->
        <div *ngIf="successMessage" class="success-message">
          <p>{{ successMessage }}</p>
        </div>
        
        <!-- Loading indicator -->
        <div *ngIf="isLoading" class="loading-container">
          <div class="loading-spinner"></div>
          <p>Chargement des options...</p>
        </div>
        
        <!-- Modify form -->
        <div *ngIf="!showDeleteConfirmation && !isLoading" class="modification-form">
          <div class="form-group">
            <label for="numberOfPeople">Nombre de personnes:</label>
            <select 
              id="numberOfPeople" 
              [(ngModel)]="numberOfPeople" 
              [disabled]="isLoading">
              <option *ngFor="let option of peopleOptions" [value]="option">
                {{ option }} personne{{ option > 1 ? 's' : '' }}
              </option>
            </select>
          </div>
          
          <div class="form-actions">
            <button 
              class="update-button" 
              [disabled]="isLoading || numberOfPeople === reservation.seats_taken" 
              (click)="updateReservation()">
              <span *ngIf="isLoading">Mise √† jour...</span>
              <span *ngIf="!isLoading">Mettre √† jour</span>
            </button>
            
            <button 
              class="delete-button" 
              [disabled]="isLoading" 
              (click)="showDeleteConfirm()">
              Annuler la r√©servation
            </button>
          </div>
        </div>
        
        <!-- Delete confirmation -->
        <div *ngIf="showDeleteConfirmation" class="delete-confirmation">
          <h3>Confirmer l'annulation</h3>
          <p>√ätes-vous s√ªr de vouloir annuler cette r√©servation ? Cette action est irr√©versible.</p>
          
          <div *ngIf="deletionErrorMessage" class="error-message">
            <p>{{ deletionErrorMessage }}</p>
          </div>
          
          <div class="confirmation-actions">
            <button 
              class="cancel-button" 
              [disabled]="isDeleting" 
              (click)="cancelDelete()">
              Conserver ma r√©servation
            </button>
            
            <button 
              class="confirm-delete-button" 
              [disabled]="isDeleting" 
              (click)="deleteReservation()">
              <span *ngIf="isDeleting">Annulation...</span>
              <span *ngIf="!isDeleting">Oui, annuler ma r√©servation</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>